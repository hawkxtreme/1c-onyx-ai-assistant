#Область ОбработчикиФормы

////////////////////////////////////////////////////////////////////////////////
// Обработчики событий формы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	
	// Загрузка текущего значения константы при открытии формы
	ЗагрузитьЗначениеКонстанты();
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиПолейФормы

////////////////////////////////////////////////////////////////////////////////
// Обработчики изменения полей формы

&НаКлиенте
Процедура ТекущийКонтурAPIПриИзменении(Элемент)
	
	// Сохранение значения в константу при изменении
	СохранитьЗначениеКонстантыНаСервере();
	
КонецПроцедуры

#КонецОбласти

#Область ПроцедурыИФункцииФормы

////////////////////////////////////////////////////////////////////////////////
// Процедуры и функции формы

&НаСервере
Процедура ЗагрузитьЗначениеКонстанты()
	
	// Получение значения константы onyx_ТекущийКонтурAPI
	ЗначениеКонстанты = Константы.onyx_ТекущийКонтурAPI.Получить();
	
	// Установка значения в атрибут формы
	Если ЗначениеЗаполнено(ЗначениеКонстанты) Тогда
		ТекущийКонтурAPI = ЗначениеКонстанты;
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Процедура СохранитьЗначениеКонстантыНаСервере()
	
	// Сохранение значения атрибута формы в константу
	Если ЗначениеЗаполнено(ТекущийКонтурAPI) Тогда
		Константы.onyx_ТекущийКонтурAPI.Установить(ТекущийКонтурAPI);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

